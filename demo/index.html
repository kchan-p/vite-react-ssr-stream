<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <title>Vite React Streaming SSR / Suspense</title>
    <style>
        .loading:before {
            content: "";
            width: 10px;
            height: 10px;
            border: 2px solid aqua;
            border-radius: 50%;
            border-top-color: brown;
            border-bottom-color: brown;
            animation: spin 1s ease-in-out infinite;
            display: inline-block;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
    <link rel="stylesheet" crossorigin href="assets/index-CK43AXXj.css">
</head>

<body>
    <h1>Vite React Streaming SSR / Suspense</h1>
    <div><!--$?--><template id="B:0"></template>
        <p class="loading">ヘッダー読み込み中...</p><!--/$-->
        <div id="csr">
            <div id="client">
                <p>CSR側</p>
                <p><button id="b001">Click!!</button></p><code id="c001" style="white-space:pre">Clickでソースコードを取得</code>
            </div>
        </div><!--$?--><template id="B:1"></template>
        <p class="loading">フッター読み込み中...</p><!--/$-->
    </div>
    <script>requestAnimationFrame(function () { $RT = performance.now() });</script>
    <div hidden id="S:1">
        <div class="ssr">
            <p>■■フッター■■</p>
        </div>
    </div>
    <div hidden id="S:0">
        <div class="ssr">
            <p>■■ヘッダー■■</p>
        </div>
    </div>
        <p style="color:red">注）このデモはNode.jsが実行できない環境上で実行しているため、サーバー側でのレンダリングができません。<br>
    そのため、実際の動作を疑似的に再現しています。</p>
    <p>GitHab:<a href="https://github.com/kchan-p/vite-react-ssr-stream">https://github.com/kchan-p/vite-react-ssr-stream</a><br>
    </p>
</body>
<script>

const demoText ="\u003C\u0021\u0044\u004F\u0043\u0054\u0059\u0050\u0045\u0020\u0068\u0074\u006D\u006C\u003E\u000A\u003C\u0068\u0074\u006D\u006C\u0020\u006C\u0061\u006E\u0067\u003D\u0022\u006A\u0061\u0022\u003E\u000A\u0020\u0020\u003C\u0068\u0065\u0061\u0064\u003E\u000A\u0020\u0020\u0020\u0020\u003C\u006D\u0065\u0074\u0061\u0020\u0063\u0068\u0061\u0072\u0073\u0065\u0074\u003D\u0022\u0055\u0054\u0046\u002D\u0038\u0022\u0020\u002F\u003E\u000A\u0020\u0020\u0020\u0020\u003C\u0074\u0069\u0074\u006C\u0065\u003E\u0056\u0069\u0074\u0065\u0020\u0052\u0065\u0061\u0063\u0074\u0020\u0053\u0074\u0072\u0065\u0061\u006D\u0069\u006E\u0067\u0020\u0053\u0053\u0052\u0020\u002F\u0020\u0053\u0075\u0073\u0070\u0065\u006E\u0073\u0065\u003C\u002F\u0074\u0069\u0074\u006C\u0065\u003E\u000A\u0020\u0020\u0020\u0020\u003C\u0073\u0074\u0079\u006C\u0065\u003E\u002E\u006C\u006F\u0061\u0064\u0069\u006E\u0067\u003A\u0062\u0065\u0066\u006F\u0072\u0065\u0020\u007B\u000A\u0020\u0020\u0020\u0020\u0063\u006F\u006E\u0074\u0065\u006E\u0074\u003A\u0020\u0022\u0022\u003B\u000A\u0020\u0020\u0020\u0020\u0077\u0069\u0064\u0074\u0068\u003A\u0020\u0031\u0030\u0070\u0078\u003B\u000A\u0020\u0020\u0020\u0020\u0068\u0065\u0069\u0067\u0068\u0074\u003A\u0020\u0031\u0030\u0070\u0078\u003B\u000A\u0020\u0020\u0020\u0020\u0062\u006F\u0072\u0064\u0065\u0072\u003A\u0020\u0032\u0070\u0078\u0020\u0073\u006F\u006C\u0069\u0064\u0020\u0061\u0071\u0075\u0061\u003B\u000A\u0020\u0020\u0020\u0020\u0062\u006F\u0072\u0064\u0065\u0072\u002D\u0072\u0061\u0064\u0069\u0075\u0073\u003A\u0020\u0035\u0030\u0025\u003B\u000A\u0020\u0020\u0020\u0020\u0062\u006F\u0072\u0064\u0065\u0072\u002D\u0074\u006F\u0070\u002D\u0063\u006F\u006C\u006F\u0072\u003A\u0020\u0062\u0072\u006F\u0077\u006E\u003B\u000A\u0020\u0020\u0020\u0020\u0062\u006F\u0072\u0064\u0065\u0072\u002D\u0062\u006F\u0074\u0074\u006F\u006D\u002D\u0063\u006F\u006C\u006F\u0072\u003A\u0020\u0062\u0072\u006F\u0077\u006E\u003B\u000A\u0020\u0020\u0020\u0020\u0061\u006E\u0069\u006D\u0061\u0074\u0069\u006F\u006E\u003A\u0020\u0073\u0070\u0069\u006E\u0020\u0031\u0073\u0020\u0065\u0061\u0073\u0065\u002D\u0069\u006E\u002D\u006F\u0075\u0074\u0020\u0069\u006E\u0066\u0069\u006E\u0069\u0074\u0065\u003B\u000A\u0020\u0020\u0020\u0020\u0064\u0069\u0073\u0070\u006C\u0061\u0079\u003A\u0020\u0069\u006E\u006C\u0069\u006E\u0065\u002D\u0062\u006C\u006F\u0063\u006B\u003B\u000A\u007D\u000A\u0040\u006B\u0065\u0079\u0066\u0072\u0061\u006D\u0065\u0073\u0020\u0073\u0070\u0069\u006E\u0020\u007B\u0020\u0074\u006F\u0020\u007B\u0020\u0074\u0072\u0061\u006E\u0073\u0066\u006F\u0072\u006D\u003A\u0020\u0072\u006F\u0074\u0061\u0074\u0065\u0028\u0033\u0036\u0030\u0064\u0065\u0067\u0029\u003B\u0020\u007D\u0020\u007D\u003C\u002F\u0073\u0074\u0079\u006C\u0065\u003E\u000A\u0020\u0020\u0020\u0020\u003C\u0073\u0063\u0072\u0069\u0070\u0074\u0020\u0074\u0079\u0070\u0065\u003D\u0022\u006D\u006F\u0064\u0075\u006C\u0065\u0022\u0020\u0063\u0072\u006F\u0073\u0073\u006F\u0072\u0069\u0067\u0069\u006E\u0020\u0073\u0072\u0063\u003D\u0022\u002F\u0061\u0073\u0073\u0065\u0074\u0073\u002F\u0069\u006E\u0064\u0065\u0078\u002D\u0043\u0056\u0056\u006F\u0072\u0074\u0059\u0043\u002E\u006A\u0073\u0022\u003E\u003C\u002F\u0073\u0063\u0072\u0069\u0070\u0074\u003E\u000A\u0020\u0020\u0020\u0020\u003C\u006C\u0069\u006E\u006B\u0020\u0072\u0065\u006C\u003D\u0022\u0073\u0074\u0079\u006C\u0065\u0073\u0068\u0065\u0065\u0074\u0022\u0020\u0063\u0072\u006F\u0073\u0073\u006F\u0072\u0069\u0067\u0069\u006E\u0020\u0068\u0072\u0065\u0066\u003D\u0022\u002F\u0061\u0073\u0073\u0065\u0074\u0073\u002F\u0069\u006E\u0064\u0065\u0078\u002D\u0043\u004B\u0034\u0033\u0041\u0058\u0058\u006A\u002E\u0063\u0073\u0073\u0022\u003E\u000A\u0020\u0020\u003C\u002F\u0068\u0065\u0061\u0064\u003E\u000A\u0020\u0020\u003C\u0062\u006F\u0064\u0079\u003E\u000A\u0020\u0020\u0020\u0020\u003C\u0068\u0031\u003E\u0056\u0069\u0074\u0065\u0020\u0052\u0065\u0061\u0063\u0074\u0020\u0053\u0074\u0072\u0065\u0061\u006D\u0069\u006E\u0067\u0020\u0053\u0053\u0052\u0020\u002F\u0020\u0053\u0075\u0073\u0070\u0065\u006E\u0073\u0065\u003C\u002F\u0068\u0031\u003E\u000A\u0020\u0020\u0020\u0020\u003C\u0064\u0069\u0076\u003E\u003C\u0021\u002D\u002D\u0024\u003F\u002D\u002D\u003E\u003C\u0074\u0065\u006D\u0070\u006C\u0061\u0074\u0065\u0020\u0069\u0064\u003D\u0022\u0042\u003A\u0030\u0022\u003E\u003C\u002F\u0074\u0065\u006D\u0070\u006C\u0061\u0074\u0065\u003E\u003C\u0070\u0020\u0063\u006C\u0061\u0073\u0073\u003D\u0022\u006C\u006F\u0061\u0064\u0069\u006E\u0067\u0022\u003E\u30D8\u30C3\u30C0\u30FC\u8AAD\u307F\u8FBC\u307F\u4E2D\u002E\u002E\u002E\u003C\u002F\u0070\u003E\u003C\u0021\u002D\u002D\u002F\u0024\u002D\u002D\u003E\u003C\u0064\u0069\u0076\u0020\u0069\u0064\u003D\u0022\u0063\u0073\u0072\u0022\u003E\u003C\u0064\u0069\u0076\u0020\u0069\u0064\u003D\u0022\u0063\u006C\u0069\u0065\u006E\u0074\u0022\u003E\u003C\u0070\u003E\u0043\u0053\u0052\u5074\u003C\u002F\u0070\u003E\u003C\u0070\u003E\u003C\u0062\u0075\u0074\u0074\u006F\u006E\u003E\u0043\u006C\u0069\u0063\u006B\u0021\u0021\u003C\u002F\u0062\u0075\u0074\u0074\u006F\u006E\u003E\u003C\u002F\u0070\u003E\u003C\u0063\u006F\u0064\u0065\u0020\u0073\u0074\u0079\u006C\u0065\u003D\u0022\u0077\u0068\u0069\u0074\u0065\u002D\u0073\u0070\u0061\u0063\u0065\u003A\u0070\u0072\u0065\u0022\u003E\u0043\u006C\u0069\u0063\u006B\u3067\u30BD\u30FC\u30B9\u30B3\u30FC\u30C9\u3092\u53D6\u5F97\u003C\u002F\u0063\u006F\u0064\u0065\u003E\u003C\u002F\u0064\u0069\u0076\u003E\u003C\u002F\u0064\u0069\u0076\u003E\u003C\u0021\u002D\u002D\u0024\u003F\u002D\u002D\u003E\u003C\u0074\u0065\u006D\u0070\u006C\u0061\u0074\u0065\u0020\u0069\u0064\u003D\u0022\u0042\u003A\u0031\u0022\u003E\u003C\u002F\u0074\u0065\u006D\u0070\u006C\u0061\u0074\u0065\u003E\u003C\u0070\u0020\u0063\u006C\u0061\u0073\u0073\u003D\u0022\u006C\u006F\u0061\u0064\u0069\u006E\u0067\u0022\u003E\u30D5\u30C3\u30BF\u30FC\u8AAD\u307F\u8FBC\u307F\u4E2D\u002E\u002E\u002E\u003C\u002F\u0070\u003E\u003C\u0021\u002D\u002D\u002F\u0024\u002D\u002D\u003E\u003C\u002F\u0064\u0069\u0076\u003E\u003C\u0073\u0063\u0072\u0069\u0070\u0074\u003E\u0072\u0065\u0071\u0075\u0065\u0073\u0074\u0041\u006E\u0069\u006D\u0061\u0074\u0069\u006F\u006E\u0046\u0072\u0061\u006D\u0065\u0028\u0066\u0075\u006E\u0063\u0074\u0069\u006F\u006E\u0028\u0029\u007B\u0024\u0052\u0054\u003D\u0070\u0065\u0072\u0066\u006F\u0072\u006D\u0061\u006E\u0063\u0065\u002E\u006E\u006F\u0077\u0028\u0029\u007D\u0029\u003B\u003C\u002F\u0073\u0063\u0072\u0069\u0070\u0074\u003E\u000A\u0020\u0020\u0020\u0020\u000A\u0020\u0020\u003C\u002F\u0062\u006F\u0064\u0079\u003E\u000A\u003C\u002F\u0068\u0074\u006D\u006C\u003E\u000A\u003C\u0064\u0069\u0076\u0020\u0068\u0069\u0064\u0064\u0065\u006E\u0020\u0069\u0064\u003D\u0022\u0053\u003A\u0031\u0022\u003E\u003C\u0064\u0069\u0076\u0020\u0063\u006C\u0061\u0073\u0073\u003D\u0022\u0073\u0073\u0072\u0022\u003E\u003C\u0070\u003E\u25A0\u25A0\u30D5\u30C3\u30BF\u30FC\u25A0\u25A0\u003C\u002F\u0070\u003E\u003C\u002F\u0064\u0069\u0076\u003E\u003C\u002F\u0064\u0069\u0076\u003E\u003C\u0073\u0063\u0072\u0069\u0070\u0074\u003E\u0024\u0052\u0042\u003D\u005B\u005D\u003B\u0024\u0052\u0056\u003D\u0066\u0075\u006E\u0063\u0074\u0069\u006F\u006E\u0028\u0061\u0029\u007B\u0024\u0052\u0054\u003D\u0070\u0065\u0072\u0066\u006F\u0072\u006D\u0061\u006E\u0063\u0065\u002E\u006E\u006F\u0077\u0028\u0029\u003B\u0066\u006F\u0072\u0028\u0076\u0061\u0072\u0020\u0062\u003D\u0030\u003B\u0062\u003C\u0061\u002E\u006C\u0065\u006E\u0067\u0074\u0068\u003B\u0062\u002B\u003D\u0032\u0029\u007B\u0076\u0061\u0072\u0020\u0063\u003D\u0061\u005B\u0062\u005D\u002C\u0065\u003D\u0061\u005B\u0062\u002B\u0031\u005D\u003B\u006E\u0075\u006C\u006C\u0021\u003D\u003D\u0065\u002E\u0070\u0061\u0072\u0065\u006E\u0074\u004E\u006F\u0064\u0065\u0026\u0026\u0065\u002E\u0070\u0061\u0072\u0065\u006E\u0074\u004E\u006F\u0064\u0065\u002E\u0072\u0065\u006D\u006F\u0076\u0065\u0043\u0068\u0069\u006C\u0064\u0028\u0065\u0029\u003B\u0076\u0061\u0072\u0020\u0066\u003D\u0063\u002E\u0070\u0061\u0072\u0065\u006E\u0074\u004E\u006F\u0064\u0065\u003B\u0069\u0066\u0028\u0066\u0029\u007B\u0076\u0061\u0072\u0020\u0067\u003D\u0063\u002E\u0070\u0072\u0065\u0076\u0069\u006F\u0075\u0073\u0053\u0069\u0062\u006C\u0069\u006E\u0067\u002C\u0068\u003D\u0030\u003B\u0064\u006F\u007B\u0069\u0066\u0028\u0063\u0026\u0026\u0038\u003D\u003D\u003D\u0063\u002E\u006E\u006F\u0064\u0065\u0054\u0079\u0070\u0065\u0029\u007B\u0076\u0061\u0072\u0020\u0064\u003D\u0063\u002E\u0064\u0061\u0074\u0061\u003B\u0069\u0066\u0028\u0022\u002F\u0024\u0022\u003D\u003D\u003D\u0064\u007C\u007C\u0022\u002F\u0026\u0022\u003D\u003D\u003D\u0064\u0029\u0069\u0066\u0028\u0030\u003D\u003D\u003D\u0068\u0029\u0062\u0072\u0065\u0061\u006B\u003B\u0065\u006C\u0073\u0065\u0020\u0068\u002D\u002D\u003B\u0065\u006C\u0073\u0065\u0022\u0024\u0022\u0021\u003D\u003D\u0064\u0026\u0026\u0022\u0024\u003F\u0022\u0021\u003D\u003D\u0064\u0026\u0026\u0022\u0024\u007E\u0022\u0021\u003D\u003D\u0064\u0026\u0026\u0022\u0024\u0021\u0022\u0021\u003D\u003D\u0064\u0026\u0026\u0022\u0026\u0022\u0021\u003D\u003D\u0064\u007C\u007C\u0068\u002B\u002B\u007D\u0064\u003D\u0063\u002E\u006E\u0065\u0078\u0074\u0053\u0069\u0062\u006C\u0069\u006E\u0067\u003B\u0066\u002E\u0072\u0065\u006D\u006F\u0076\u0065\u0043\u0068\u0069\u006C\u0064\u0028\u0063\u0029\u003B\u0063\u003D\u0064\u007D\u0077\u0068\u0069\u006C\u0065\u0028\u0063\u0029\u003B\u0066\u006F\u0072\u0028\u003B\u0065\u002E\u0066\u0069\u0072\u0073\u0074\u0043\u0068\u0069\u006C\u0064\u003B\u0029\u0066\u002E\u0069\u006E\u0073\u0065\u0072\u0074\u0042\u0065\u0066\u006F\u0072\u0065\u0028\u0065\u002E\u0066\u0069\u0072\u0073\u0074\u0043\u0068\u0069\u006C\u0064\u002C\u0063\u0029\u003B\u0067\u002E\u0064\u0061\u0074\u0061\u003D\u0022\u0024\u0022\u003B\u0067\u002E\u005F\u0072\u0065\u0061\u0063\u0074\u0052\u0065\u0074\u0072\u0079\u0026\u0026\u0072\u0065\u0071\u0075\u0065\u0073\u0074\u0041\u006E\u0069\u006D\u0061\u0074\u0069\u006F\u006E\u0046\u0072\u0061\u006D\u0065\u0028\u0067\u002E\u005F\u0072\u0065\u0061\u0063\u0074\u0052\u0065\u0074\u0072\u0079\u0029\u007D\u007D\u0061\u002E\u006C\u0065\u006E\u0067\u0074\u0068\u003D\u0030\u007D\u003B\u000A\u0024\u0052\u0043\u003D\u0066\u0075\u006E\u0063\u0074\u0069\u006F\u006E\u0028\u0061\u002C\u0062\u0029\u007B\u0069\u0066\u0028\u0062\u003D\u0064\u006F\u0063\u0075\u006D\u0065\u006E\u0074\u002E\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064\u0028\u0062\u0029\u0029\u0028\u0061\u003D\u0064\u006F\u0063\u0075\u006D\u0065\u006E\u0074\u002E\u0067\u0065\u0074\u0045\u006C\u0065\u006D\u0065\u006E\u0074\u0042\u0079\u0049\u0064\u0028\u0061\u0029\u0029\u003F\u0028\u0061\u002E\u0070\u0072\u0065\u0076\u0069\u006F\u0075\u0073\u0053\u0069\u0062\u006C\u0069\u006E\u0067\u002E\u0064\u0061\u0074\u0061\u003D\u0022\u0024\u007E\u0022\u002C\u0024\u0052\u0042\u002E\u0070\u0075\u0073\u0068\u0028\u0061\u002C\u0062\u0029\u002C\u0032\u003D\u003D\u003D\u0024\u0052\u0042\u002E\u006C\u0065\u006E\u0067\u0074\u0068\u0026\u0026\u0028\u0022\u006E\u0075\u006D\u0062\u0065\u0072\u0022\u0021\u003D\u003D\u0074\u0079\u0070\u0065\u006F\u0066\u0020\u0024\u0052\u0054\u003F\u0072\u0065\u0071\u0075\u0065\u0073\u0074\u0041\u006E\u0069\u006D\u0061\u0074\u0069\u006F\u006E\u0046\u0072\u0061\u006D\u0065\u0028\u0024\u0052\u0056\u002E\u0062\u0069\u006E\u0064\u0028\u006E\u0075\u006C\u006C\u002C\u0024\u0052\u0042\u0029\u0029\u003A\u0028\u0061\u003D\u0070\u0065\u0072\u0066\u006F\u0072\u006D\u0061\u006E\u0063\u0065\u002E\u006E\u006F\u0077\u0028\u0029\u002C\u0073\u0065\u0074\u0054\u0069\u006D\u0065\u006F\u0075\u0074\u0028\u0024\u0052\u0056\u002E\u0062\u0069\u006E\u0064\u0028\u006E\u0075\u006C\u006C\u002C\u0024\u0052\u0042\u0029\u002C\u0032\u0033\u0030\u0030\u003E\u0061\u0026\u0026\u0032\u0045\u0033\u003C\u0061\u003F\u0032\u0033\u0030\u0030\u002D\u0061\u003A\u0024\u0052\u0054\u002B\u0033\u0030\u0030\u002D\u0061\u0029\u0029\u0029\u0029\u003A\u0062\u002E\u0070\u0061\u0072\u0065\u006E\u0074\u004E\u006F\u0064\u0065\u002E\u0072\u0065\u006D\u006F\u0076\u0065\u0043\u0068\u0069\u006C\u0064\u0028\u0062\u0029\u007D\u003B\u0024\u0052\u0043\u0028\u0022\u0042\u003A\u0031\u0022\u002C\u0022\u0053\u003A\u0031\u0022\u0029\u003C\u002F\u0073\u0063\u0072\u0069\u0070\u0074\u003E\u003C\u0064\u0069\u0076\u0020\u0068\u0069\u0064\u0064\u0065\u006E\u0020\u0069\u0064\u003D\u0022\u0053\u003A\u0030\u0022\u003E\u003C\u0064\u0069\u0076\u0020\u0063\u006C\u0061\u0073\u0073\u003D\u0022\u0073\u0073\u0072\u0022\u003E\u003C\u0070\u003E\u25A0\u25A0\u30D8\u30C3\u30C0\u30FC\u25A0\u25A0\u003C\u002F\u0070\u003E\u003C\u002F\u0064\u0069\u0076\u003E\u003C\u002F\u0064\u0069\u0076\u003E\u003C\u0073\u0063\u0072\u0069\u0070\u0074\u003E\u0024\u0052\u0043\u0028\u0022\u0042\u003A\u0030\u0022\u002C\u0022\u0053\u003A\u0030\u0022\u0029\u003C\u002F\u0073\u0063\u0072\u0069\u0070\u0074\u003E\u000A";


    document.addEventListener("DOMContentLoaded",()=>{
const wait1 = 3000;
const wait2 = 5000;
$RB = []; $RV = function (a) { $RT = performance.now(); for (var b = 0; b < a.length; b += 2) { var c = a[b], e = a[b + 1]; null !== e.parentNode && e.parentNode.removeChild(e); var f = c.parentNode; if (f) { var g = c.previousSibling, h = 0; do { if (c && 8 === c.nodeType) { var d = c.data; if ("/$" === d || "/&" === d) if (0 === h) break; else h--; else "$" !== d && "$?" !== d && "$~" !== d && "$!" !== d && "&" !== d || h++ } d = c.nextSibling; f.removeChild(c); c = d } while (c); for (; e.firstChild;)f.insertBefore(e.firstChild, c); g.data = "$"; g._reactRetry && requestAnimationFrame(g._reactRetry) } } a.length = 0 };
    $RC = function (a, b) { if (b = document.getElementById(b)) (a = document.getElementById(a)) ? (a.previousSibling.data = "$~", $RB.push(a, b), 2 === $RB.length && ("number" !== typeof $RT ? requestAnimationFrame($RV.bind(null, $RB)) : (a = performance.now(), setTimeout($RV.bind(null, $RB), 2300 > a && 2E3 < a ? 2300 - a : $RT + 300 - a)))) : b.parentNode.removeChild(b) }; 
    setTimeout(()=>$RC("B:1", "S:1"),wait1);
setTimeout(()=>$RC("B:0", "S:0"),5000);
    
    let busy = false;
    const b = document.getElementById("b001");
    b.addEventListener("click",()=>{
        if( busy ) return;
        b.classList.add("loading");
        busy = true;
        setTimeout( ()=>{
            document.getElementById("c001").innerText = demoText;
            busy=false;
            b.classList.remove("loading");
        },Math.max(wait1,wait2) );
    });
    });





</script>

</html>